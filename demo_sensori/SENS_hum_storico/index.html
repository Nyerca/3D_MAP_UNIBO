<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  <title>Animated Data Bar Chart & Graph</title>
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
<meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
<link rel="stylesheet" type="text/css" href="/css/style.css" />

      


</head>

<body>

  <main class="stats">
  <header class="stats__header">
    <div class="stats__header-num">
      <p>8</p>
    </div>
    <div class="stats__header-name">
      <p>Alex<span>Ovechkin</span></p>
    </div>
  </header>
  <ul class="stats__list">
    <li class="stats__item bubbles">
      <p class="stats__item-num">65</p>
      <div id="g_uno" class="stats__item-bar"></div>
    </li>
    <li class="stats__item">
      <p class="stats__item-num">56</p>
      <div id="g_due" class="stats__item-bar"></div>
    </li>
    <li class="stats__item">
      <p class="stats__item-num bubbles">50</p>
      <div class="stats__item-bar"></div>
    </li>
    <li class="stats__item">
      <p class="stats__item-num">32</p>
      <div class="stats__item-bar"></div>
    </li>
    <li class="stats__item">
      <p class="stats__item-num">38</p>
      <div class="stats__item-bar"></div>
    </li>
    <li class="stats__item">
      <p class="stats__item-num">32</p>
      <div class="stats__item-bar"></div>
    </li>
    <li class="stats__item">
      <p class="stats__item-num">51</p>
      <div class="stats__item-bar"></div>
    </li>
    <li class="stats__item">
      <p class="stats__item-num">50</p>
      <div class="stats__item-bar"></div>
    </li>
  </ul>
  <div class="stats__overlay">
    <div class="stats__overlay-back">
      <svg fill="white" xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M30 16.5H11.74l8.38-8.38L18 6 6 18l12 12 2.12-2.12-8.38-8.38H30v-3z"></path></svg>
      <p id="year">2009-2010</p>
    </div>
    <div class="stats__overlay-avg">
      <p class="avg" id="avg">0.69</p>
      <p>Goals per game</p>
    </div>
    <div class="stats__overlay-info">
      <div class="stats__overlay-info-half">
        <p id="goals">50</p>
        <p>Goals</p>
      </div>
      <div class="stats__overlay-info-half">
        <p id="games">72</p>
        <p>Games</p>
      </div>
    </div>
  </div>
</main>
  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

  <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
  
<script src = "/socket.io/socket.io.js"></script>
    <script  src="/js/index.js"></script>
	<script>
	/*
var dateObj = new Date();
var month = dateObj.getUTCMonth() + 1; //months from 1-12
var day = dateObj.getUTCDate();
var year = dateObj.getUTCFullYear();
var today = year + "-" + month + "-" + day;
if(("" + month).length == 1) {
today = year + "-0" + month + "-" + day;
}

var yesterday = new Date();
yesterday.setDate(yesterday.getDate() - 1);

var month2 = yesterday.getUTCMonth() + 1; //months from 1-12
var day2 = yesterday.getUTCDate();
var year2 = yesterday.getUTCFullYear();
var yesterday = year2 + "-" + month2 + "-" + day2;
if(("" + month2).length == 1) {
yesterday = year2 + "-0" + month2 + "-" + day2;
}

var day_2 = new Date();
day_2.setDate(day_2.getDate() - 2);

var month3 = day_2.getUTCMonth() + 1; //months from 1-12
var day3 = day_2.getUTCDate();
var year3 = day_2.getUTCFullYear();
var day_2 = year3 + "-" + month3 + "-" + day3;
if(("" + month3).length == 1) {
day_2 = year3 + "-0" + month3 + "-" + day3;
}
console.log(day_2);
*/
var day0, day1, day2, day3, day4, day5, day6;
for(var i= 0; i < 7; i++) {
var day = new Date();
day.setDate(day.getDate() - i);

var month_n = day.getUTCMonth() + 1; //months from 1-12
var day_n = day.getUTCDate();
var year_n = day.getUTCFullYear();
var day = year_n
if(("" + month_n).length == 1) {
day += "-0" + month_n
} else {
day += "-" + month_n
}
if(("" +day_n).length == 1) {
day += "-0" + day_n
} else {
day += "-" + day_n
}

switch(i) {
	case 0: day0 = day; break;
	case 1: day1 = day; break;
	case 2: day2 = day; break;
	case 3: day3 = day; break;
	case 4: day4 = day; break;
	case 5: day5 = day; break;
	case 6: day6 = day; break;
}

}

		$(document).ready(function() {
	var socket = io('/mySensorNamespace');
      socket.on('hi',function(data) {
		 valore = data.split(';');
		for(var field in valore) {
			var line = valore[field].split('***');
			
			var d = new Date("" + line[1]);
var str = $.datepicker.formatDate('yy-mm-dd', d);
			if(str === day0) {
			var input = document.querySelector('#g_uno');
			input.style.setProperty('height', line[0] * 3 + 'px')
			} else if(str == day1) {
			var input = document.querySelector('#g_due');
			input.style.setProperty('height', line[0] * 3 +'px')
			}
			console.log(str);

		}		
      });
	  });


	</script>




</body>

</html>
